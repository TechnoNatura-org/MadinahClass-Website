<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/index.css">
    <script src="https://kit.fontawesome.com/fbfd4b3bb0.js" crossorigin="anonymous"></script>
</head>
<style>
    .loader-wrapper {
        z-index: 9999;
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        transition: .3s;
    }

    .loader-wrapper.loaded {
        opacity: 0;
        z-index: -1;
    }

    .loader {
        display: inline-block;
        width: 30px;
        height: 30px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }

    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }

    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }

        25% {
            transform: rotate(180deg);
        }

        50% {
            transform: rotate(180deg);
        }

        75% {
            transform: rotate(360deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }

    @keyframes loader-inner {
        0% {
            height: 0%;
        }

        25% {
            height: 0%;
        }

        50% {
            height: 100%;
        }

        75% {
            height: 100%;
        }

        100% {
            height: 0%;
        }
    }
    }
</style>

<body>
    <div class="loader-wrapper">
        <span class="loader"><span class="loader-inner"></span></span>
        <p class="status">Loading<span>.</span><span>.</span><span>.</span></p>
    </div>
    <main class="smooth">
        <nav>
            <div class="logo">
                <h4>madinah class</h4>
            </div>
            <ul class="nav-links">
                <li><a href="">Home</a></li>
                <li><a href="">Projects</a></li>
                <li><a href="">About Us</a></li>
                <li><a href="">Contact Us</a></li>
            </ul>
            <div class="burger">
                <div class="line1"></div>
                <div class="line2"></div>
                <div class="line3"></div>
            </div>
        </nav>
        <section id="landingPage">
            <div class="bg"></div>
            <div class="box">
                <h1>Madinah Class</h1>
                <p>Hello There! Iâ€™m Glad to see you</p>
            </div>
        </section>
        <section id="aboutUsSection">
            <div class="bg"></div>
            <div class="boxes">
                <div class="profileUs">
                    <img src="https://res.cloudinary.com/madinah/image/upload/v1601630647/home%20page%20images/humaaans_2_umom85.png"
                        alt="">
                </div>
                <div class="infoWrapper">
                    <div class="info">
                        <p class="paragraphTitle">About Us</p>
                        <h2 class="title">letâ€™s get to know us</h2>
                        <p class="desc">Hello There, we glad to see you for visiting this website. We are Madinah class
                            where we are first junior high school class, We are IndonesianðŸ‡®ðŸ‡© student. We created a lot
                            of
                            cool stuff! wanna check our projects? Click here</p>
                    </div>
                    <div class="buttons">
                        <a href="">
                            <div class="button primary">Learn More</div>
                        </a>
                        <a href="">
                            <div class="button">Contact Us</div>
                        </a>
                    </div>
                </div>
            </div>
        </section>
        <section id="ourTeamSection">
            <div class="boxes">
                <div class="info">
                    <p class="paragraphTitle">Our Team</p>
                    <h2 class="title">
                        Letâ€™s Meets Our Team
                    </h2>
                    <p class="desc">Our class has 16 students. We could make website, designing website, make
                        illustration, and make 3D objects. This website created by two people, we are so excited to
                        create this website, and we created this website full with love.</p>
                    <a href="">
                        <div class="button primary">
                            Meets Team
                        </div>
                    </a>
                </div>
                <div class="picture">
                    <img src="https://res.cloudinary.com/madinah/image/upload/v1601630652/home%20page%20images/undraw_good_team_m7uu_cdicvm.svg"
                        alt="">
                </div>
            </div>
        </section>
        <section id="whatWeDo">
            <div class="bg"></div>
            <div class="boxes">
                <div class="images">
                    <img src="https://res.cloudinary.com/madinah/image/upload/v1601630653/home%20page%20images/undraw_interaction_design_odgc_m6fnar.svg"
                        alt="">
                    <img src="https://res.cloudinary.com/madinah/image/upload/v1601630654/home%20page%20images/undraw_dev_focus_b9xo_jm5jhg.svg"
                        alt="">
                    <img src="https://res.cloudinary.com/madinah/image/upload/v1601630653/home%20page%20images/undraw_web_developer_p3e5_t7pcwu.svg"
                        alt="">
                </div>
                <div class="info">
                    <p class="paragraphTitle">What We Do?</p>
                    <h2 class="title">What we can do?</h2>
                    <p class="desc">We do what we like, we create Illustration, Paint, Developing, Developing Website,
                        Designing Website, and much more! If you want to see out projects go to Projects page, to see
                        all of our projects</p>
                    <a href="">
                        <div class="button primary">Our Projects</div>
                    </a>
                </div>
            </div>
        </section>
        <section id="projects">
            <div class="bg"></div>
            <div class="container">
                <p class="paragraphTitle">Latest Projects</p>
                <h2 class="title">Our Latest Projects</h2>
                <div class="cardsWrapper">
                    <div class="cards_wrapper">
                        <p>NOT FOUND!</p>
                    </div>
                </div>
                <a href="" class="showMore">
                    <div class="button primary">See All</div>
                </a>
            </div>

        </section>
        <section id="footer">
            <div class="container">
                <div class="card">
                    <div class="textsWrapper">
                        <p class="desc">Want to receive our email news letter?</p>
                        <h2 class="title">Get In Touch!</h2>
                    </div>
                </div>
                <form class="newsLetterWrapper">
                    <input type="email" name="email" id="email" required placeholder="email@example.com">
                    <button type="submit" name="subscribe" id="submit">Send</button>
                </form>
            </div>
            <footer>&copy; 2020 by Madinah Class</footer>
        </section>
    </main>

    <script>
        const cardsWrapper = document.querySelector('.cards_wrapper');
        const burger = document.querySelector('.burger');
        const lW = document.querySelector('.loader-wrapper');
        // console.log(cardsWrapper)

        async function generateLatestProject() {
            try {
                let cards = '';
                let cardLists = await getProjects();
                // console.log(cards)
                cardLists = cardLists.slice(cardLists.length - 3, cardLists.length);
                cards = generateCard(cardLists);
                console.log(generateCard(cardLists))

                cardsWrapper.innerHTML = cards;
            } catch (err) {
                cardsWrapper.querySelector('p').innerHTML = err
                cardsWrapper.classList.add('error')
            }
        }

        generateLatestProject()

        function getProjects() {
            return fetch('js/projects.json')
                .then(response => {
                    console.log(response)
                    if (response.status == 404) {
                        throw new Error(response.statusText);
                    }
                    return response.json();
                })
                .then(response => response)
        }

        function truncateAString(str, int) {
            if (str.length == int)
                return str
            else
                return str.substring(0, int) + '...';
        }
        function generateCard(arr) {
            let Arr = '';
            arr.forEach(element => {
                let { name: titleProject, desc: descProject, author, image } = element;
                descProject = truncateAString(descProject, 15);
                Arr +=
                    `
        <div class="card">
            <div class="image">
                <img src="${image}" alt="">
            </div>
            <div class="card_content">
                <h3 class="titleCard">${titleProject}</h3>
                <p class="desc">${descProject}</p>
                <div class="author">
                    <i class="fas fa-user-circle"></i>
                    <span>${author}</span>
                </div>
            </div>
        </div>
        `;
            });
            return Arr;
        }
        console.log(burger)

        burger.addEventListener('click', function () {
            console.log(this.parentElement)
            this.parentElement.classList.toggle('active')
        });


        // loading bar 
        let status;
        window.addEventListener('online', (event) => {
            lW.querySelector('.status').textContent = 'Connected!';
            setTimeout(() => {
                lW.classList.add('loaded');
            }, 2000);
        });
        window.addEventListener('load', (event) => {
            setTimeout(() => {
                lW.classList.add('loaded')
            }, 1000);
        });
        // if we disconnect to network then this statment run
        window.addEventListener('offline', (event) => {
            lW.querySelector('.status').textContent = 'Waiting for network..'
            lW.classList.remove('loaded')
        });
    </script>
</body>

</html>